# 機能仕様書 (Feature Specifications)

## 1. ツールショートカットボタン (Tool Shortcut Buttons)

Geminiのチャット入力欄付近に、頻繁に使用するツール（Gem）へのショートカットボタンを表示します。

### 機能詳細
- **配置場所**: チャット入力欄の下部（ツールバー付近）。
- **動作**: ボタンをクリックすると、対応するGemへのメンション（例: `@Deep Research`）が入力欄に挿入され、ツールがアクティブになります。
- **対応ツール**:
  - 🤖 **Deep Research**: 深い調査を行うエージェント
  - 🎨 **Canvas**: コンテンツ生成・編集用キャンバス
  - 🍌 **Nanobanana**: （カスタム）コード生成・実行環境
  - その他、Google Workspace系ツール（Drive, Gmail, Docs, etc.）
- **設定**: 拡張機能のPopupメニューから、表示するツールのON/OFFを切り替え可能。

## 2. コンテンツ幅調整 (Content Width Adjuster)

Geminiのチャット画面のコンテンツ幅を自在に調整できます。

### 機能詳細
- **操作**: 拡張機能のPopupメニューにあるスライダーで調整。
- **範囲**: 狭い幅から、ウルトラワイドモニター向けの最大幅まで設定可能。
- **保存**: 設定した幅はブラウザに保存され、次回アクセス時も維持されます。

## 3. Gem検索バー (Gem Search Bar)

Geminiのサイドバーに検索機能を追加し、多数のカスタムGemから目的のものを素早く見つけ出せます。

### 機能詳細
- **検索バー配置**: サイドバーの「Gem」セクションヘッダーの下に常時表示。
- **検索動作**:
  1. キーワードを入力して `Enter` を押下。
  2. Google GeminiのGem一覧ページ (`/gems/view`) へ自動遷移。
  3. **検索結果セクション** がページ上部（Google Labsバナーの下）に表示され、ヒットしたGemが一覧化されます。
- **検索結果の表示**:
  - ユーザー作成GemとGoogle作成Gemの両方から検索。
  - 検索結果は専用のセクションに複製表示され、元のリストはそのまま維持されます。
  - `sessionStorage` を使用して検索クエリを一時保存。
- **自動クリア**: Gem一覧ページから他のページ（チャットなど）に遷移すると、検索クエリは自動的にクリアされ、次に一覧ページを開いたときは通常表示に戻ります。

## 技術仕様 (Technical Details)
- **DOM監視**: `MutationObserver` を使用して、Geminiの動的なDOM変更（SPA遷移）に追従し、検索バーやボタンを再挿入します。
- **スタイリング**: Geminiのネイティブデザイン（Material Design 3ベース）に準拠したCSSを注入。ダークモードにも完全対応。
